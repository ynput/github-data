name: Test custom action
on:
  workflow_dispatch:
env:
  GH_TOKEN: ${{ secrets.CI_TOKEN }}
jobs:
  test-action:
    runs-on: ubuntu-latest

    steps:
        - name: Run action
          id: test-action
          uses: ynput/github-data@main
          with:
            repo: "ynput/ayon-addon-action-testing"
            date: "2024-20-08T09:48:33Z"
            query_parameters: "body,labels,title"

        - name: Test empty pr output
          if: ${{ steps.test-action.outputs.raw-output }}
          run: |
            echo "::error:: Empty output was detecetd as input."
            exit 1

        - name: Test empty pr output
          if: ${{ steps.test-action.outputs.label-list }}
          run: |
            echo "::error:: Empty output was detecetd as input."
            exit 1
